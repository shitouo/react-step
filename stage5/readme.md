### stage4

#### 目标

这个阶段的目标是要实现setState函数，更新我们的页面。

#### 思路

在调用setState后，我们会首先更新我们组件实例的state。可以通过this获取到当前组件实例。
然后调用组件的render函数，让组件的各节点的pendingProps和memoriedProps比较，如果不一样，则标识此节点为需要更新。
我们能够找到组件的实例对象，也能够找到相对应的Fiber节点（假设一开始实例和Fiber互相绑定了），但是我们怎么知道当前组件在dom tree中的位置呢？这就不好办了。所以react采用的就是每次setState时，重新生成新的Fiber tree（和创建时不一样，并且生成过程中完成了diff）
但是，我们如何找到原来的Fiber tree呢，能想到的一种方式是用一个变量来保存当前Fiber tree的root节点的引用，另外一个方式是，从当前节点出发，一路向上找到root节点。猛地一看，肯定是第一种方式简单，但是增加全局变量并不是我们想要的，并且我们后面还需要在向上寻找的过程中做一些操作，所以，这里我们还是选择第二种方式。
所以这里有一点我们要注意，检查各节点是否有更新，是组件的全量节点，所以我们一个组件的节点不要太多，不然会很消耗性能。

#### 实施


#### 总结
